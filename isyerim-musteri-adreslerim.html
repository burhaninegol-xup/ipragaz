<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Subelerim - Ipragaz IsYerim</title>
	<link rel="shortcut icon" type="image/x-icon" href="https://ipappbayi.ipragaz.com.tr/bayi/_ui/responsive/theme-ipragaz/images/faviconNew.jpg">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
	<style>
		* { margin: 0; padding: 0; box-sizing: border-box; }
		body { font-family: 'Poppins', sans-serif; background: #f5f5f5; color: #333; }
		a { text-decoration: none; color: inherit; }
		.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
		.settings-layout { display: flex; gap: 30px; padding: 30px 0; }
		.settings-content { flex: 1; background: #fff; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); padding: 30px; }
		.content-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 1px solid #eee; }

		/* Address List */
		.addresses-list { display: flex; flex-direction: column; gap: 15px; }
		.address-card { background: #fff; border: 1px solid #e0e0e0; border-radius: 10px; padding: 20px; position: relative; }
		.address-card.default { border-color: #e31e24; border-width: 2px; }
		.address-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
		.address-name { font-size: 16px; font-weight: 600; color: #333; display: flex; align-items: center; gap: 10px; }
		.default-badge { background: #e31e24; color: #fff; font-size: 11px; padding: 3px 8px; border-radius: 4px; font-weight: 500; }
		.address-actions { display: flex; gap: 15px; }
		.address-action { color: #e31e24; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 5px; background: none; border: none; font-family: inherit; }
		.address-action:hover { text-decoration: underline; }
		.address-action svg { width: 16px; height: 16px; }
		.address-text { font-size: 14px; color: #666; line-height: 1.6; }

		/* Add New Address Button */
		.add-address-btn { width: 100%; background: #e31e24; color: #fff; border: none; border-radius: 8px; padding: 15px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 20px; font-family: inherit; transition: background 0.3s; }
		.add-address-btn:hover { background: #c91a1f; }
		.add-address-btn svg { width: 20px; height: 20px; }

		/* Empty State */
		.empty-state { text-align: center; padding: 60px 20px; }
		.empty-icon { width: 80px; height: 80px; margin: 0 auto 20px; color: #ccc; }
		.empty-text { font-size: 16px; color: #666; margin-bottom: 10px; }
		.empty-subtext { font-size: 14px; color: #999; }

		/* Slide Panel */
		.panel-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
		.panel-overlay.active { opacity: 1; visibility: visible; }
		.slide-panel { position: fixed; top: 0; right: -450px; width: 450px; max-width: 100%; height: 100%; background: #fff; z-index: 1001; transition: right 0.3s ease; display: flex; flex-direction: column; }
		.slide-panel.active { right: 0; }
		.panel-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #eee; }
		.panel-title { font-size: 18px; font-weight: 600; color: #333; }
		.panel-close { background: none; border: none; cursor: pointer; padding: 5px; color: #666; }
		.panel-close svg { width: 24px; height: 24px; }
		.panel-body { flex: 1; overflow-y: auto; padding: 20px; }
		.panel-footer { padding: 20px; border-top: 1px solid #eee; }

		/* Form Styles */
		.form-group { margin-bottom: 20px; }
		.form-label { display: block; font-size: 14px; font-weight: 500; color: #333; margin-bottom: 8px; }
		.form-input, .form-select { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; font-family: inherit; transition: border-color 0.3s; }
		.form-input:focus, .form-select:focus { outline: none; border-color: #e31e24; }
		.form-select { appearance: none; background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 8L1 3h10z'/%3E%3C/svg%3E") no-repeat right 15px center; background-color: #fff; cursor: pointer; }
		.form-row { display: flex; gap: 15px; }
		.form-row .form-group { flex: 1; }
		.save-btn { width: 100%; background: #e31e24; color: #fff; border: none; border-radius: 8px; padding: 15px; font-size: 16px; font-weight: 600; cursor: pointer; font-family: inherit; transition: background 0.3s; }
		.save-btn:hover { background: #c91a1f; }
		.save-btn:disabled { background: #ccc; cursor: not-allowed; }

		/* Loading */
		.loading { text-align: center; padding: 40px; color: #666; }

		/* Delete Confirmation Modal */
		.confirm-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; display: none; align-items: center; justify-content: center; }
		.confirm-modal.active { display: flex; }
		.confirm-box { background: #fff; border-radius: 12px; padding: 30px; max-width: 400px; width: 90%; text-align: center; }
		.confirm-icon { width: 60px; height: 60px; margin: 0 auto 20px; color: #e31e24; }
		.confirm-title { font-size: 18px; font-weight: 600; margin-bottom: 10px; }
		.confirm-text { font-size: 14px; color: #666; margin-bottom: 25px; }
		.confirm-buttons { display: flex; gap: 15px; }
		.confirm-btn { flex: 1; padding: 12px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; font-family: inherit; border: none; transition: background 0.3s; }
		.confirm-btn.cancel { background: #f0f0f0; color: #333; }
		.confirm-btn.cancel:hover { background: #e0e0e0; }
		.confirm-btn.delete { background: #e31e24; color: #fff; }
		.confirm-btn.delete:hover { background: #c91a1f; }

		@media (max-width: 992px) { .settings-layout { flex-direction: column; } }
		@media (max-width: 480px) {
			.slide-panel { width: 100%; right: -100%; }
			.form-row { flex-direction: column; gap: 0; }
			.address-header { flex-direction: column; align-items: flex-start; gap: 10px; }
			.address-actions { margin-top: 5px; }
		}
	</style>
</head>
<body>
	<div id="isyerim-top-bar"></div>
	<div id="isyerim-header"></div>
	<div class="container">
		<div class="settings-layout">
			<div id="isyerim-settings-sidebar"></div>
			<div class="settings-content">
				<h1 class="content-title">Subelerim</h1>
				<div id="addresses-container">
					<div class="loading">Subeler yukleniyor...</div>
				</div>
				<button class="add-address-btn" onclick="openAddressPanel('add')">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<line x1="12" y1="5" x2="12" y2="19"/>
						<line x1="5" y1="12" x2="19" y2="12"/>
					</svg>
					Yeni Sube Ekle
				</button>
			</div>
		</div>
	</div>
	<div id="isyerim-footer"></div>

	<!-- Slide Panel -->
	<div class="panel-overlay" id="panelOverlay" onclick="closeAddressPanel()"></div>
	<div class="slide-panel" id="addressPanel">
		<div class="panel-header">
			<h2 class="panel-title" id="panelTitle">Sube Ekle</h2>
			<button class="panel-close" onclick="closeAddressPanel()">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<line x1="18" y1="6" x2="6" y2="18"/>
					<line x1="6" y1="6" x2="18" y2="18"/>
				</svg>
			</button>
		</div>
		<div class="panel-body">
			<form id="addressForm">
				<input type="hidden" id="addressId">
				<div class="form-group">
					<label class="form-label">Il *</label>
					<select class="form-select" id="citySelect" onchange="loadDistricts()" required>
						<option value="">Il Seciniz</option>
					</select>
				</div>
				<div class="form-group">
					<label class="form-label">Ilce *</label>
					<select class="form-select" id="districtSelect" onchange="loadNeighborhoods()" required>
						<option value="">Ilce Seciniz</option>
					</select>
				</div>
				<div class="form-group">
					<label class="form-label">Mahalle</label>
					<select class="form-select" id="neighborhoodSelect" onchange="loadStreets()">
						<option value="">Mahalle Seciniz</option>
					</select>
				</div>
				<div class="form-group">
					<label class="form-label">Cadde/Sokak</label>
					<select class="form-select" id="streetSelect">
						<option value="">Cadde/Sokak Seciniz</option>
					</select>
				</div>
				<div class="form-row">
					<div class="form-group">
						<label class="form-label">Bina No</label>
						<input type="text" class="form-input" id="buildingNo" placeholder="Bina No">
					</div>
					<div class="form-group">
						<label class="form-label">Kat</label>
						<input type="text" class="form-input" id="floor" placeholder="Kat">
					</div>
					<div class="form-group">
						<label class="form-label">Daire</label>
						<input type="text" class="form-input" id="apartment" placeholder="Daire">
					</div>
				</div>
				<div class="form-group">
					<label class="form-label">Adres Tarifi</label>
					<input type="text" class="form-input" id="branchDescription" placeholder="Adres tarifi giriniz">
				</div>
				<div class="form-group">
					<label class="form-label">Sube Adi *</label>
					<input type="text" class="form-input" id="branchName" placeholder="Ornegin: Merkez, Depo, vb." required>
				</div>
				<div class="form-group">
					<label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
						<input type="checkbox" id="isMerkez" style="width: 18px; height: 18px; accent-color: #e31e24;">
						<span class="form-label" style="margin: 0;">Merkez Sube</span>
					</label>
				</div>
			</form>
		</div>
		<div class="panel-footer">
			<button class="save-btn" onclick="saveAddress()">Kaydet</button>
		</div>
	</div>

	<!-- Delete Confirmation Modal -->
	<div class="confirm-modal" id="deleteModal">
		<div class="confirm-box">
			<svg class="confirm-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<path d="M3 6h18"/>
				<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
				<line x1="10" y1="11" x2="10" y2="17"/>
				<line x1="14" y1="11" x2="14" y2="17"/>
			</svg>
			<h3 class="confirm-title">Subeyi Sil</h3>
			<p class="confirm-text">Bu subeyi silmek istediginizden emin misiniz? Bu islem geri alinamaz.</p>
			<div class="confirm-buttons">
				<button class="confirm-btn cancel" onclick="closeDeleteModal()">Iptal</button>
				<button class="confirm-btn delete" onclick="confirmDelete()">Sil</button>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
	<script src="./js/supabase-client.js"></script>
	<script src="./js/services/branches-service.js"></script>
	<script src="./js/services/dealers-service.js"></script>
	<script src="./js/services/customers-service.js"></script>
	<script src="./js/services/locations-service.js"></script>
	<script src="./js/component-loader.js"></script>
	<script>
		var customerId = null;
		var currentAddressId = null;
		var deleteAddressId = null;

		document.addEventListener('DOMContentLoaded', async function() {
			customerId = sessionStorage.getItem('isyerim_customer_id');
			var userRole = sessionStorage.getItem('isyerim_user_role');

			if (!customerId) { window.location.href = 'isyerim-musteri-login.html'; return; }

			// Sadece owner kullanicilar bu sayfaya erisebilir
			if (userRole !== 'owner') {
				alert('Bu sayfaya erisim yetkiniz bulunmuyor.');
				window.location.href = 'isyerim-musteri-anasayfa.html';
				return;
			}

			try {
				var response = await fetch('./components/isyerim-settings-sidebar.html');
				var html = await response.text();
				document.getElementById('isyerim-settings-sidebar').innerHTML = html;
				setTimeout(function() { if (typeof initSettingsSidebar === 'function') initSettingsSidebar('adreslerim'); }, 100);
			} catch (err) { console.error('Sidebar yukleme hatasi:', err); }

			loadCities();
			await loadAddresses();
		});

		// Subeleri yukle
		async function loadAddresses() {
			var container = document.getElementById('addresses-container');
			container.innerHTML = '<div class="loading">Subeler yukleniyor...</div>';

			var result = await BranchesService.getByCustomerId(customerId);

			if (result.error) {
				container.innerHTML = '<div class="loading">Subeler yuklenirken hata olustu</div>';
				return;
			}

			var addresses = result.data || [];

			if (addresses.length === 0) {
				container.innerHTML = '<div class="empty-state"><svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg><p class="empty-text">Henuz kayitli subeniz bulunmuyor</p><p class="empty-subtext">Yeni sube ekleyerek baslayabilirsiniz</p></div>';
				return;
			}

			var html = '<div class="addresses-list">';
			addresses.forEach(function(addr) {
				html += '<div class="address-card' + (addr.is_default ? ' default' : '') + '">';
				html += '<div class="address-header">';
				html += '<span class="address-name">' + addr.branch_name;
				if (addr.is_default) html += ' <span class="default-badge">Merkez</span>';
				html += '</span>';
				html += '<div class="address-actions">';
				html += '<button class="address-action" onclick="openAddressPanel(\'edit\', \'' + addr.id + '\')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> Duzenle</button>';
				if (!addr.is_default) {
					html += '<button class="address-action" onclick="setDefaultAddress(\'' + addr.id + '\')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg> Merkez Yap</button>';
				}
				html += '<button class="address-action" onclick="openDeleteModal(\'' + addr.id + '\')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> Sil</button>';
				html += '</div></div>';
				html += '<p class="address-text">' + (addr.full_address || '-') + '</p>';
				html += '</div>';
			});
			html += '</div>';

			container.innerHTML = html;
		}

		// Il/Ilce dropdownlari - API tabanli
		async function loadCities() {
			var select = document.getElementById('citySelect');
			select.innerHTML = '<option value="">Il Yukleniyor...</option>';

			var result = await LocationsService.getCities();

			if (result.error) {
				select.innerHTML = '<option value="">Hata olustu</option>';
				console.error('Iller yuklenemedi:', result.error);
				return;
			}

			select.innerHTML = '<option value="">Il Seciniz</option>';
			result.data.forEach(function(city) {
				select.innerHTML += '<option value="' + city.id + '" data-name="' + city.name + '">' + city.name + '</option>';
			});
		}

		async function loadDistricts() {
			var cityId = document.getElementById('citySelect').value;
			var select = document.getElementById('districtSelect');
			var neighborhoodSelect = document.getElementById('neighborhoodSelect');
			var streetSelect = document.getElementById('streetSelect');

			// Reset alt dropdown'lar
			neighborhoodSelect.innerHTML = '<option value="">Once ilce seciniz</option>';
			streetSelect.innerHTML = '<option value="">Once mahalle seciniz</option>';

			if (!cityId) {
				select.innerHTML = '<option value="">Once il seciniz</option>';
				return;
			}

			select.innerHTML = '<option value="">Ilce Yukleniyor...</option>';

			var result = await LocationsService.getDistrictsByCityId(cityId);

			if (result.error) {
				select.innerHTML = '<option value="">Hata olustu</option>';
				console.error('Ilceler yuklenemedi:', result.error);
				return;
			}

			select.innerHTML = '<option value="">Ilce Seciniz</option>';
			result.data.forEach(function(district) {
				select.innerHTML += '<option value="' + district.id + '" data-name="' + district.name + '">' + district.name + '</option>';
			});
		}

		async function loadNeighborhoods() {
			var districtId = document.getElementById('districtSelect').value;
			var select = document.getElementById('neighborhoodSelect');
			var streetSelect = document.getElementById('streetSelect');

			// Reset sokak dropdown
			streetSelect.innerHTML = '<option value="">Once mahalle seciniz</option>';

			if (!districtId) {
				select.innerHTML = '<option value="">Once ilce seciniz</option>';
				return;
			}

			select.innerHTML = '<option value="">Mahalle Yukleniyor...</option>';

			var result = await LocationsService.getNeighborhoodsByDistrictId(districtId);

			if (result.error || !result.data || result.data.length === 0) {
				select.innerHTML = '<option value="">Mahalle bulunamadi</option>';
				return;
			}

			select.innerHTML = '<option value="">Mahalle Seciniz</option>';
			result.data.forEach(function(n) {
				select.innerHTML += '<option value="' + n.id + '" data-name="' + n.name + '">' + n.name + '</option>';
			});
		}

		async function loadStreets() {
			var neighborhoodId = document.getElementById('neighborhoodSelect').value;
			var select = document.getElementById('streetSelect');

			if (!neighborhoodId) {
				select.innerHTML = '<option value="">Once mahalle seciniz</option>';
				return;
			}

			select.innerHTML = '<option value="">Sokak Yukleniyor...</option>';

			var result = await LocationsService.getStreetsByNeighborhoodId(neighborhoodId);

			if (result.error || !result.data || result.data.length === 0) {
				select.innerHTML = '<option value="">Sokak bulunamadi</option>';
				return;
			}

			select.innerHTML = '<option value="">Cadde/Sokak Seciniz</option>';
			result.data.forEach(function(s) {
				select.innerHTML += '<option value="' + s.id + '" data-name="' + s.name + '">' + s.name + '</option>';
			});
		}

		// Secili option'in data-name degerini al
		function getSelectedOptionName(selectId) {
			var select = document.getElementById(selectId);
			var selectedOption = select.options[select.selectedIndex];
			return selectedOption ? selectedOption.getAttribute('data-name') : null;
		}

		// Panel ac/kapat
		function openAddressPanel(mode, addressId) {
			document.getElementById('panelOverlay').classList.add('active');
			document.getElementById('addressPanel').classList.add('active');
			document.body.style.overflow = 'hidden';

			if (mode === 'edit' && addressId) {
				document.getElementById('panelTitle').textContent = 'Sube Duzenle';
				currentAddressId = addressId;
				loadAddressData(addressId);
			} else {
				document.getElementById('panelTitle').textContent = 'Sube Ekle';
				currentAddressId = null;
				clearForm();
			}
		}

		function closeAddressPanel() {
			document.getElementById('panelOverlay').classList.remove('active');
			document.getElementById('addressPanel').classList.remove('active');
			document.body.style.overflow = '';
			clearForm();
		}

		function clearForm() {
			document.getElementById('addressForm').reset();
			document.getElementById('addressId').value = '';
			document.getElementById('districtSelect').innerHTML = '<option value="">Ilce Seciniz</option>';
			document.getElementById('neighborhoodSelect').innerHTML = '<option value="">Mahalle Seciniz</option>';
			document.getElementById('streetSelect').innerHTML = '<option value="">Cadde/Sokak Seciniz</option>';
			document.getElementById('isMerkez').checked = false;
		}

		async function loadAddressData(addressId) {
			var result = await BranchesService.getById(addressId);
			if (result.error || !result.data) return;

			var addr = result.data;

			// Il sec ve ilceleri yukle (ID veya isim bazli)
			if (addr.city_id) {
				document.getElementById('citySelect').value = addr.city_id;
			}
			await loadDistricts();

			// Ilce sec ve mahalleleri yukle
			if (addr.district_id) {
				document.getElementById('districtSelect').value = addr.district_id;
			}
			await loadNeighborhoods();

			// Mahalle sec ve sokaklari yukle
			if (addr.neighborhood_id) {
				document.getElementById('neighborhoodSelect').value = addr.neighborhood_id;
			}
			await loadStreets();

			// Sokak sec
			if (addr.street_id) {
				document.getElementById('streetSelect').value = addr.street_id;
			}

			document.getElementById('buildingNo').value = addr.building_no || '';
			document.getElementById('floor').value = addr.floor || '';
			document.getElementById('apartment').value = addr.apartment || '';
			document.getElementById('branchDescription').value = addr.branch_description || '';
			document.getElementById('branchName').value = addr.branch_name || '';
			document.getElementById('isMerkez').checked = addr.is_default || false;
		}

		// Sube kaydet
		async function saveAddress() {
			var branchName = document.getElementById('branchName').value.trim();
			var cityId = document.getElementById('citySelect').value;
			var districtId = document.getElementById('districtSelect').value;
			var neighborhoodId = document.getElementById('neighborhoodSelect').value;
			var streetId = document.getElementById('streetSelect').value;

			// Text degerlerini de al (backward compatibility icin)
			var cityName = getSelectedOptionName('citySelect');
			var districtName = getSelectedOptionName('districtSelect');
			var neighborhoodName = getSelectedOptionName('neighborhoodSelect');
			var streetName = getSelectedOptionName('streetSelect');

			if (!branchName || !cityId || !districtId) {
				alert('Lutfen zorunlu alanlari doldurun');
				return;
			}

			var isMerkez = document.getElementById('isMerkez').checked;

			var branchData = {
				customer_id: customerId,
				branch_name: branchName,
				is_default: isMerkez,
				// Yeni FK kolonlari
				city_id: cityId || null,
				district_id: districtId || null,
				neighborhood_id: neighborhoodId || null,
				street_id: streetId || null,
				// Eski VARCHAR kolonlari (backward compatibility)
				city: cityName || null,
				district: districtName || null,
				neighborhood: neighborhoodName || null,
				street: streetName || null,
				// Diger alanlar
				building_no: document.getElementById('buildingNo').value.trim() || null,
				floor: document.getElementById('floor').value.trim() || null,
				apartment: document.getElementById('apartment').value.trim() || null,
				branch_description: document.getElementById('branchDescription').value.trim() || null
			};

			var result;
			if (currentAddressId) {
				result = await BranchesService.update(currentAddressId, branchData);
			} else {
				result = await BranchesService.create(branchData);
			}

			if (result.error) {
				alert('Sube kaydedilemedi: ' + result.error.message);
				return;
			}

			closeAddressPanel();
			await loadAddresses();
		}

		// Varsayilan sube yap
		async function setDefaultAddress(addressId) {
			var result = await BranchesService.setDefault(addressId, customerId);
			if (result.error) {
				alert('Merkez sube ayarlanamadi');
				return;
			}
			await loadAddresses();
		}

		// Silme modali
		function openDeleteModal(addressId) {
			deleteAddressId = addressId;
			document.getElementById('deleteModal').classList.add('active');
		}

		function closeDeleteModal() {
			deleteAddressId = null;
			document.getElementById('deleteModal').classList.remove('active');
		}

		async function confirmDelete() {
			if (!deleteAddressId) return;

			var result = await BranchesService.delete(deleteAddressId);
			if (result.error) {
				alert('Sube silinemedi');
				closeDeleteModal();
				return;
			}

			closeDeleteModal();
			await loadAddresses();
		}
	</script>
</body>
</html>
