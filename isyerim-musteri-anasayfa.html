<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>İşYerim - İpragaz</title>
	<link rel="shortcut icon" type="image/x-icon" href="https://ipappbayi.ipragaz.com.tr/bayi/_ui/responsive/theme-ipragaz/images/faviconNew.jpg">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: #f5f5f5;
			color: #333;
		}

		a {
			text-decoration: none;
			color: inherit;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 20px;
		}

		/* Top Bar */
		.top-bar {
			background: #fff;
			border-bottom: 1px solid #eee;
			font-size: 13px;
		}

		.top-bar .container {
			display: flex;
			justify-content: space-between;
			align-items: center;
			height: 44px;
		}

		.top-bar-left a,
		.top-bar-right a {
			color: #333;
			font-weight: 500;
		}

		.top-bar-left a:hover,
		.top-bar-right a:hover {
			color: #e31e24;
		}

		.top-bar-right {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.top-bar-right a {
			display: flex;
			align-items: center;
			gap: 6px;
		}

		.top-bar-right svg {
			width: 20px;
			height: 20px;
		}

		/* Cart Link with Badge */
		.cart-link {
			position: relative;
		}

		.cart-badge {
			position: absolute;
			top: -8px;
			right: -8px;
			background: #e31e24;
			color: #fff;
			font-size: 11px;
			font-weight: 600;
			min-width: 18px;
			height: 18px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0 4px;
		}

		/* Add to Cart Button - Added State */
		.btn-add-cart.added {
			background: #28a745;
			border-color: #28a745;
			color: #fff;
			pointer-events: none;
		}

		/* Header */
		.header {
			background: #fff;
			box-shadow: 0 2px 10px rgba(0,0,0,0.05);
			position: sticky;
			top: 0;
			z-index: 100;
		}

		.header .container {
			display: flex;
			align-items: center;
			justify-content: space-between;
			height: 70px;
		}

		.header-logo svg {
			height: 36px;
			width: auto;
		}

		.header-user-location {
			display: flex;
			align-items: center;
			gap: 8px;
			color: #333;
			font-size: 14px;
			cursor: pointer;
			padding: 10px 18px;
			border: 1px solid #e0e0e0;
			border-radius: 30px;
			transition: all 0.2s;
		}

		.header-user-location:hover {
			border-color: #e31e24;
		}

		.header-user-location svg {
			width: 18px;
			height: 18px;
			color: #e31e24;
		}

		.header-user-location .user-name {
			font-weight: 500;
		}

		.header-actions {
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.header-action {
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			color: #666;
			transition: background 0.2s, color 0.2s;
		}

		.header-action:hover {
			background: #f5f5f5;
			color: #e31e24;
		}

		.header-action svg {
			width: 22px;
			height: 22px;
		}

		/* Profile Dropdown */
		.profile-dropdown-container {
			position: relative;
		}

		.profile-dropdown {
			position: absolute;
			top: calc(100% + 10px);
			right: 0;
			background: #fff;
			border-radius: 12px;
			box-shadow: 0 5px 25px rgba(0,0,0,0.15);
			min-width: 200px;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all 0.2s ease;
			z-index: 200;
			overflow: hidden;
		}

		.profile-dropdown.active {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.profile-dropdown-item {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 14px 18px;
			color: #333;
			font-size: 14px;
			font-weight: 500;
			text-decoration: none;
			transition: background 0.2s;
			border-bottom: 1px solid #f0f0f0;
		}

		.profile-dropdown-item:last-child {
			border-bottom: none;
		}

		.profile-dropdown-item:hover {
			background: #f9f9f9;
		}

		.profile-dropdown-item svg {
			width: 18px;
			height: 18px;
			color: #888;
		}

		.profile-dropdown-item:hover svg {
			color: #e31e24;
		}

		.profile-dropdown-item.logout {
			color: #e31e24;
		}

		.profile-dropdown-item.logout svg {
			color: #e31e24;
		}

		/* Hero Banner / Slider */
		.hero {
			background: linear-gradient(135deg, #e31e24 0%, #c41a1f 100%);
			color: #fff;
			position: relative;
			overflow: hidden;
		}

		.hero-slider {
			position: relative;
			width: 100%;
			overflow: hidden;
		}

		.hero-slides {
			display: flex;
			transition: transform 0.6s ease-in-out;
		}

		.hero-slide {
			min-width: 100%;
			padding: 40px 0;
		}

		.hero-slide .container {
			display: flex;
			align-items: center;
			justify-content: space-between;
		}

		.hero-content {
			max-width: 400px;
		}

		.hero-title {
			font-size: 32px;
			font-weight: 700;
			line-height: 1.3;
		}

		.hero-subtitle {
			font-size: 16px;
			opacity: 0.9;
			margin-top: 15px;
		}

		/* Slider Dots */
		.hero-dots {
			position: absolute;
			bottom: 20px;
			left: 50%;
			transform: translateX(-50%);
			display: flex;
			gap: 8px;
		}

		.hero-dot {
			width: 10px;
			height: 10px;
			border-radius: 50%;
			background: rgba(255,255,255,0.4);
			cursor: pointer;
			transition: all 0.3s;
		}

		.hero-dot.active {
			background: #fff;
			width: 24px;
			border-radius: 5px;
		}

		/* Slide 4 - Mahallem Premium Styles */
		.hero-slide.premium {
			background: linear-gradient(135deg, #ff6b35 0%, #e31e24 50%, #c41a1f 100%);
			position: relative;
			overflow: hidden;
		}

		.hero-slide.premium::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 200%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
			animation: shimmer 3s infinite;
		}

		@keyframes shimmer {
			0% { left: -100%; }
			100% { left: 100%; }
		}

		.hero-slide.premium .hero-title {
			font-size: 42px;
			text-shadow: 0 0 40px rgba(255,255,255,0.6), 0 0 80px rgba(255,255,255,0.3);
			animation: glow 2s ease-in-out infinite alternate;
		}

		@keyframes glow {
			from { text-shadow: 0 0 40px rgba(255,255,255,0.6), 0 0 80px rgba(255,255,255,0.3); }
			to { text-shadow: 0 0 60px rgba(255,255,255,0.8), 0 0 100px rgba(255,255,255,0.5); }
		}

		.hero-slide.premium .hero-subtitle {
			font-size: 18px;
			font-weight: 500;
		}

		.sparkle {
			position: absolute;
			width: 8px;
			height: 8px;
			background: #fff;
			border-radius: 50%;
			animation: sparkle 2s infinite;
			box-shadow: 0 0 10px #fff, 0 0 20px #fff;
		}

		@keyframes sparkle {
			0%, 100% { opacity: 0; transform: scale(0); }
			50% { opacity: 1; transform: scale(1); }
		}

		.mahallem-icon {
			width: 200px;
			height: 200px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.mahallem-icon svg {
			width: 100%;
			height: 100%;
			filter: drop-shadow(0 0 30px rgba(255,255,255,0.5));
		}

		.hero-image {
			width: 50%;
			max-width: 500px;
		}

		.hero-image img {
			width: 100%;
			height: auto;
			border-radius: 12px;
		}

		/* Section Header */
		.section-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 20px;
		}

		.section-title {
			font-size: 18px;
			font-weight: 600;
			color: #333;
		}

		.section-link {
			font-size: 13px;
			color: #e31e24;
			display: flex;
			align-items: center;
			gap: 4px;
		}

		.section-link:hover {
			text-decoration: underline;
		}

		/* Products Section */
		.products-section {
			padding: 40px 0;
			background: #fff;
		}

		.products-grid {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 20px;
		}

		.product-card {
			position: relative;
			background: #fff;
			border: 1px solid #eee;
			border-radius: 12px;
			padding: 20px;
			text-align: center;
			transition: box-shadow 0.2s, transform 0.2s;
		}

		.product-card:hover {
			box-shadow: 0 5px 20px rgba(0,0,0,0.1);
			transform: translateY(-2px);
		}

		.product-favorite {
			position: absolute;
			top: 12px;
			right: 12px;
			width: 32px;
			height: 32px;
			background: #fff;
			border: none;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			z-index: 2;
			transition: transform 0.2s;
		}

		.product-favorite:hover {
			transform: scale(1.1);
		}

		.product-favorite svg {
			width: 18px;
			height: 18px;
			color: #ccc;
			fill: none;
			stroke: currentColor;
			stroke-width: 2;
			transition: all 0.2s;
		}

		.product-favorite.active svg {
			color: #e31e24;
			fill: #e31e24;
		}

		.product-image {
			height: 120px;
			display: flex;
			align-items: center;
			justify-content: center;
			margin-bottom: 15px;
		}

		.product-image img {
			max-height: 100%;
			max-width: 100%;
			object-fit: contain;
		}

		.product-name {
			font-size: 14px;
			font-weight: 600;
			color: #333;
			margin-bottom: 8px;
			min-height: 40px;
		}

		.product-price {
			font-size: 12px;
			color: #888;
			margin-bottom: 15px;
		}

		.btn-add-cart {
			width: 100%;
			padding: 10px 16px;
			background: #fff;
			border: 2px solid #e31e24;
			border-radius: 25px;
			color: #e31e24;
			font-size: 13px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s;
		}

		.btn-add-cart:hover {
			background: #e31e24;
			color: #fff;
		}

		/* Campaigns Section */
		.campaigns-section {
			padding: 40px 0;
			background: #f5f5f5;
		}

		.campaigns-grid {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 20px;
		}

		.campaign-card {
			background: #fff;
			border-radius: 12px;
			padding: 25px;
			border: 1px solid #eee;
		}

		.campaign-header {
			display: flex;
			align-items: flex-start;
			justify-content: space-between;
			margin-bottom: 15px;
		}

		.campaign-logo {
			width: 50px;
			height: 50px;
			background: #fff5f5;
			border-radius: 10px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.campaign-logo svg {
			width: 30px;
			height: 30px;
			color: #e31e24;
		}

		.campaign-title {
			font-size: 18px;
			font-weight: 700;
			color: #e31e24;
			margin-bottom: 10px;
		}

		.campaign-badge {
			display: inline-block;
			padding: 4px 10px;
			background: #e31e24;
			color: #fff;
			font-size: 11px;
			font-weight: 500;
			border-radius: 4px;
			margin-bottom: 15px;
		}

		.campaign-meta {
			display: flex;
			align-items: center;
			gap: 15px;
			font-size: 12px;
			color: #888;
			margin-bottom: 12px;
		}

		.campaign-meta svg {
			width: 14px;
			height: 14px;
		}

		.campaign-meta span {
			display: flex;
			align-items: center;
			gap: 4px;
		}

		.campaign-desc {
			font-size: 13px;
			color: #666;
			line-height: 1.5;
		}

		/* Features Section */
		.features-section {
			padding: 40px 0;
			background: #fff;
		}

		.features-grid {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 20px;
		}

		.feature-card {
			display: flex;
			align-items: flex-start;
			gap: 15px;
			padding: 20px;
			background: #f9f9f9;
			border-radius: 12px;
		}

		.feature-icon {
			width: 50px;
			height: 50px;
			background: #fff5f5;
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-shrink: 0;
		}

		.feature-icon svg {
			width: 24px;
			height: 24px;
			color: #e31e24;
		}

		.feature-title {
			font-size: 15px;
			font-weight: 600;
			color: #333;
			margin-bottom: 5px;
		}

		.feature-desc {
			font-size: 13px;
			color: #888;
		}

		/* CTA Banner */
		.cta-banner {
			background: linear-gradient(135deg, #e31e24 0%, #c41a1f 100%);
			color: #fff;
			padding: 30px 0;
		}

		.cta-banner .container {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 30px;
		}

		.cta-content {
			flex: 1;
		}

		.cta-text {
			font-size: 14px;
			line-height: 1.6;
			margin-bottom: 15px;
		}

		.btn-cta {
			display: inline-block;
			padding: 10px 25px;
			background: #fff;
			color: #e31e24;
			font-size: 13px;
			font-weight: 600;
			border-radius: 25px;
			border: none;
			cursor: pointer;
			transition: transform 0.2s;
		}

		.btn-cta:hover {
			transform: scale(1.05);
		}

		.cta-phone {
			text-align: right;
		}

		.cta-phone-label {
			font-size: 13px;
			margin-bottom: 5px;
			opacity: 0.9;
		}

		.cta-phone-number {
			font-size: 28px;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 10px;
		}

		.cta-phone-number svg {
			width: 28px;
			height: 28px;
		}

		/* Info Section */
		.info-section {
			padding: 40px 0;
			background: #fff;
		}

		.info-title {
			font-size: 16px;
			font-weight: 600;
			color: #333;
			margin-bottom: 10px;
		}

		.info-badge {
			display: inline-block;
			padding: 4px 10px;
			background: #e31e24;
			color: #fff;
			font-size: 11px;
			font-weight: 600;
			border-radius: 4px;
			margin-left: 10px;
		}

		.info-text {
			font-size: 13px;
			color: #666;
			line-height: 1.7;
			margin-bottom: 15px;
		}

		.info-link {
			font-size: 13px;
			color: #e31e24;
			display: flex;
			align-items: center;
			gap: 4px;
		}

		/* Footer */
		.footer {
			background: #f5f5f5;
			padding: 40px 0 20px;
			border-top: 1px solid #eee;
		}

		.footer-grid {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 40px;
			margin-bottom: 30px;
		}

		.footer-title {
			font-size: 13px;
			font-weight: 600;
			color: #333;
			margin-bottom: 15px;
		}

		.footer-links {
			list-style: none;
		}

		.footer-links li {
			margin-bottom: 10px;
		}

		.footer-links a {
			font-size: 13px;
			color: #666;
			transition: color 0.2s;
		}

		.footer-links a:hover {
			color: #e31e24;
		}

		.footer-social {
			display: flex;
			gap: 12px;
		}

		.footer-social a {
			width: 36px;
			height: 36px;
			background: #fff;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #666;
			transition: all 0.2s;
		}

		.footer-social a:hover {
			background: #e31e24;
			color: #fff;
		}

		.footer-social svg {
			width: 18px;
			height: 18px;
		}

		.footer-bottom {
			text-align: center;
			padding-top: 20px;
			border-top: 1px solid #e0e0e0;
			font-size: 12px;
			color: #888;
		}

		/* Responsive */
		@media (max-width: 992px) {
			.products-grid {
				grid-template-columns: repeat(2, 1fr);
			}

			.hero .container {
				flex-direction: column;
				text-align: center;
			}

			.hero-content {
				max-width: 100%;
				margin-bottom: 30px;
			}

			.hero-image {
				width: 80%;
			}

			.cta-banner .container {
				flex-direction: column;
				text-align: center;
			}

			.cta-phone {
				text-align: center;
			}
		}

		@media (max-width: 768px) {
			.campaigns-grid,
			.features-grid {
				grid-template-columns: 1fr;
			}

			.footer-grid {
				grid-template-columns: 1fr;
				gap: 30px;
			}

			.header-location span {
				display: none;
			}

			/* Mobil header düzeltmesi */
			.header .container {
				padding: 0 15px;
			}

			.header-logo svg {
				height: 28px;
			}

			/* Kullanıcı + konum pill'ini mobilde gizle */
			.header-user-location {
				display: none;
			}
		}

		@media (max-width: 576px) {
			.products-grid {
				grid-template-columns: 1fr;
			}

			.hero-title {
				font-size: 24px;
			}

			.cta-phone-number {
				font-size: 22px;
			}
		}

		/* Repeat Order Section */
		.repeat-order-section {
			padding: 20px 0;
			background: #f5f5f5;
			display: none;
		}

		.repeat-order-section.visible {
			display: block;
		}

		.btn-repeat-order {
			display: flex;
			align-items: center;
			justify-content: space-between;
			width: 100%;
			padding: 20px 25px;
			background: linear-gradient(135deg, #ff8c42 0%, #e67635 100%);
			border: none;
			border-radius: 16px;
			color: #fff;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(255, 140, 66, 0.3);
		}

		.btn-repeat-order:hover {
			transform: scale(1.02);
			box-shadow: 0 6px 25px rgba(255, 140, 66, 0.4);
		}

		.btn-repeat-order-content {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.btn-repeat-order-icon {
			width: 48px;
			height: 48px;
			background: rgba(255, 255, 255, 0.2);
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.btn-repeat-order-icon svg {
			width: 24px;
			height: 24px;
		}

		.btn-repeat-order-text {
			text-align: left;
		}

		.btn-repeat-order-text h3 {
			font-size: 16px;
			font-weight: 600;
			margin: 0 0 4px 0;
		}

		.btn-repeat-order-text p {
			font-size: 13px;
			margin: 0;
			opacity: 0.9;
		}

		.btn-repeat-order-arrow svg {
			width: 24px;
			height: 24px;
		}

		/* Repeat Order Modal / Overlay */
		.repeat-order-overlay {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.5);
			z-index: 1000;
			display: none;
			align-items: center;
			justify-content: center;
			padding: 20px;
		}

		.repeat-order-overlay.active {
			display: flex;
		}

		.repeat-order-modal {
			background: #fff;
			border-radius: 20px;
			width: 100%;
			max-width: 550px;
			max-height: 90vh;
			overflow-y: auto;
			animation: modalSlideIn 0.3s ease;
		}

		@keyframes modalSlideIn {
			from {
				opacity: 0;
				transform: translateY(-20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.repeat-order-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 20px 25px;
			border-bottom: 1px solid #eee;
		}

		.repeat-order-header h2 {
			font-size: 18px;
			font-weight: 600;
			color: #333;
			margin: 0;
		}

		.repeat-order-close {
			width: 36px;
			height: 36px;
			background: #f5f5f5;
			border: none;
			border-radius: 50%;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: background 0.2s;
		}

		.repeat-order-close:hover {
			background: #eee;
		}

		.repeat-order-close svg {
			width: 20px;
			height: 20px;
			color: #666;
		}

		.repeat-order-body {
			padding: 20px 25px;
		}

		.repeat-order-branch {
			display: flex;
			flex-direction: column;
			gap: 4px;
			padding: 15px;
			background: #fff5f0;
			border-radius: 12px;
			margin-bottom: 12px;
			border-left: 4px solid #ff8c42;
		}

		.repeat-order-branch-icon {
			display: flex;
			align-items: center;
			gap: 8px;
			margin-bottom: 4px;
		}

		.repeat-order-branch-icon svg {
			width: 18px;
			height: 18px;
			color: #ff8c42;
		}

		.repeat-order-branch-label {
			font-size: 12px;
			color: #888;
			font-weight: 500;
		}

		.repeat-order-branch-name {
			font-size: 15px;
			font-weight: 600;
			color: #333;
		}

		.repeat-order-branch-address {
			font-size: 12px;
			color: #666;
			line-height: 1.4;
		}

		.repeat-order-dealer {
			display: flex;
			align-items: flex-start;
			gap: 10px;
			padding: 15px;
			background: #f9f9f9;
			border-radius: 12px;
			margin-bottom: 20px;
		}

		.repeat-order-dealer svg {
			width: 20px;
			height: 20px;
			color: #e31e24;
			flex-shrink: 0;
			margin-top: 2px;
		}

		.repeat-order-dealer-info {
			display: flex;
			flex-direction: column;
			gap: 2px;
		}

		.repeat-order-dealer-name {
			font-size: 14px;
			color: #333;
			font-weight: 500;
		}

		.repeat-order-dealer-phone,
		.repeat-order-dealer-location {
			font-size: 12px;
			color: #666;
		}

		.repeat-order-items-title {
			font-size: 14px;
			font-weight: 600;
			color: #333;
			margin-bottom: 12px;
		}

		.repeat-order-items {
			display: flex;
			flex-direction: column;
			gap: 10px;
			margin-bottom: 20px;
		}

		.repeat-order-item {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 12px 15px;
			background: #fff;
			border: 1px solid #eee;
			border-radius: 12px;
		}

		.repeat-order-item-image {
			width: 50px;
			height: 50px;
			border-radius: 8px;
			overflow: hidden;
			background: #f5f5f5;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.repeat-order-item-image img {
			max-width: 100%;
			max-height: 100%;
			object-fit: contain;
		}

		.repeat-order-item-info {
			flex: 1;
		}

		.repeat-order-item-name {
			font-size: 14px;
			font-weight: 500;
			color: #333;
			margin-bottom: 2px;
		}

		.repeat-order-item-qty {
			font-size: 12px;
			color: #888;
		}

		.repeat-order-item-price {
			font-size: 14px;
			font-weight: 600;
			color: #e31e24;
		}

		.time-slots-title {
			font-size: 14px;
			font-weight: 600;
			color: #333;
			margin-bottom: 12px;
		}

		.time-slots {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
			margin-bottom: 20px;
		}

		.time-slot {
			padding: 15px 10px;
			background: #f9f9f9;
			border: 2px solid transparent;
			border-radius: 12px;
			text-align: center;
			cursor: pointer;
			transition: all 0.2s;
		}

		.time-slot:hover {
			background: #f0f0f0;
		}

		.time-slot.selected {
			background: #fff5f5;
			border-color: #e31e24;
		}

		.time-slot-hour {
			font-size: 18px;
			font-weight: 700;
			color: #333;
			margin-bottom: 2px;
		}

		.time-slot-day {
			font-size: 11px;
			color: #888;
			text-transform: uppercase;
		}

		.repeat-order-total {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 15px;
			background: #f9f9f9;
			border-radius: 12px;
			margin-bottom: 20px;
		}

		.repeat-order-total-label {
			font-size: 14px;
			color: #666;
		}

		.repeat-order-total-value {
			font-size: 20px;
			font-weight: 700;
			color: #e31e24;
		}

		.repeat-order-actions {
			display: flex;
			gap: 12px;
		}

		.btn-repeat-edit {
			flex: 1;
			padding: 14px 20px;
			background: #fff;
			border: 2px solid #ff8c42;
			border-radius: 12px;
			color: #ff8c42;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s;
		}

		.btn-repeat-edit:hover {
			background: #fff5f0;
		}

		.btn-repeat-submit {
			flex: 2;
			padding: 14px 20px;
			background: linear-gradient(135deg, #e31e24 0%, #c41a1f 100%);
			border: none;
			border-radius: 12px;
			color: #fff;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s;
		}

		.btn-repeat-submit:hover {
			transform: scale(1.02);
			box-shadow: 0 4px 15px rgba(227, 30, 36, 0.3);
		}

		.btn-repeat-submit:disabled {
			opacity: 0.6;
			cursor: not-allowed;
			transform: none;
		}

		/* Repeat Order Empty State */
		.repeat-order-empty {
			text-align: center;
			padding: 30px 20px;
		}

		.repeat-order-empty-icon {
			width: 80px;
			height: 80px;
			background: #f5f5f5;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			margin: 0 auto 20px;
		}

		.repeat-order-empty-icon svg {
			width: 40px;
			height: 40px;
			color: #ccc;
		}

		.repeat-order-empty h3 {
			font-size: 16px;
			font-weight: 600;
			color: #333;
			margin: 0 0 8px 0;
		}

		.repeat-order-empty p {
			font-size: 13px;
			color: #888;
			margin: 0;
		}

		/* Offer Countdown Section - Two boxes side by side */
		.offer-countdown-wrapper {
			display: flex;
			gap: 15px;
			align-items: stretch;
		}

		.offer-countdown-wrapper .btn-repeat-order {
			flex: 1;
		}

		.btn-offer-countdown {
			display: none;
			flex: 1;
			align-items: center;
			justify-content: space-between;
			padding: 20px 25px;
			background: linear-gradient(135deg, #e31e24 0%, #c41a1f 100%);
			border: none;
			border-radius: 16px;
			color: #fff;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(227, 30, 36, 0.3);
			text-decoration: none;
		}

		.btn-offer-countdown.visible {
			display: flex;
		}

		.btn-offer-countdown:hover {
			transform: scale(1.02);
			box-shadow: 0 6px 25px rgba(227, 30, 36, 0.4);
		}

		.btn-offer-countdown-content {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.btn-offer-countdown-icon {
			width: 48px;
			height: 48px;
			background: rgba(255, 255, 255, 0.2);
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.btn-offer-countdown-icon svg {
			width: 24px;
			height: 24px;
		}

		.btn-offer-countdown-text {
			text-align: left;
		}

		.btn-offer-countdown-text h3 {
			font-size: 16px;
			font-weight: 600;
			margin: 0 0 4px 0;
		}

		.btn-offer-countdown-text p {
			font-size: 13px;
			margin: 0;
			opacity: 0.9;
		}

		.countdown-timer {
			font-size: 18px;
			font-weight: 700;
			background: rgba(255, 255, 255, 0.2);
			padding: 8px 16px;
			border-radius: 10px;
		}

		.btn-offer-countdown-arrow svg {
			width: 24px;
			height: 24px;
		}

		/* Responsive: Mobile - stack vertically */
		@media (max-width: 768px) {
			.offer-countdown-wrapper {
				flex-direction: column;
			}
		}

		/* Repeat Order Mobile Bottom Sheet */
		@media (max-width: 768px) {
			.repeat-order-overlay {
				align-items: flex-end;
				padding: 0;
			}

			.repeat-order-modal {
				border-radius: 20px 20px 0 0;
				max-height: 85vh;
				animation: bottomSheetSlideIn 0.3s ease;
			}

			@keyframes bottomSheetSlideIn {
				from {
					transform: translateY(100%);
				}
				to {
					transform: translateY(0);
				}
			}

			.time-slots {
				grid-template-columns: 1fr;
			}

			.repeat-order-actions {
				flex-direction: column;
			}

			.btn-repeat-edit,
			.btn-repeat-submit {
				flex: none;
			}
		}
	</style>
</head>
<body>
	<!-- Top Bar (Component) -->
	<div id="isyerim-top-bar"></div>

	<!-- Header (Component) -->
	<div id="isyerim-header"></div>

	<!-- Hero Banner / Slider -->
	<section class="hero">
		<div class="hero-slider">
			<div class="hero-slides" id="heroSlides">
				<!-- Slide 1 -->
				<div class="hero-slide">
					<div class="container">
						<div class="hero-content">
							<h1 class="hero-title">İŞLETMENİZİN<br>ENERJİSİ<br>İPRAGAZ'DAN!</h1>
							<p class="hero-subtitle">Avantajlı fiyatlarla hızlıca tüp sipariş verin</p>
						</div>
						<div class="hero-image">
							<img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=600&h=400&fit=crop" alt="Şef mutfakta">
						</div>
					</div>
				</div>
				<!-- Slide 2 -->
				<div class="hero-slide">
					<div class="container">
						<div class="hero-content">
							<h1 class="hero-title">KAMPANYALARI<br>KAÇIRMAYIN!</h1>
							<p class="hero-subtitle">Size özel kampanya ve indirimlerden yararlanın</p>
						</div>
						<div class="hero-image">
							<img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=600&h=400&fit=crop" alt="Restoran">
						</div>
					</div>
				</div>
				<!-- Slide 3 -->
				<div class="hero-slide">
					<div class="container">
						<div class="hero-content">
							<h1 class="hero-title">7/24<br>TESLİMAT<br>HİZMETİ</h1>
							<p class="hero-subtitle">Acil durumlarda her zaman yanınızdayız</p>
						</div>
						<div class="hero-image">
							<img src="https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?w=600&h=400&fit=crop" alt="Teslimat">
						</div>
					</div>
				</div>
				<!-- Slide 4 - Mahallem Premium -->
				<div class="hero-slide premium">
					<!-- Sparkle animasyonları -->
					<div class="sparkle" style="top:15%;left:8%;animation-delay:0s;"></div>
					<div class="sparkle" style="top:25%;left:85%;animation-delay:0.4s;"></div>
					<div class="sparkle" style="top:65%;left:12%;animation-delay:0.8s;"></div>
					<div class="sparkle" style="top:75%;left:88%;animation-delay:1.2s;"></div>
					<div class="sparkle" style="top:40%;left:5%;animation-delay:1.6s;"></div>
					<div class="sparkle" style="top:50%;left:92%;animation-delay:2s;"></div>
					<div class="container">
						<div class="hero-content">
							<h1 class="hero-title">MAHALLEM<br>YAYINDA!</h1>
							<p class="hero-subtitle">Mahallenizdeki en yakın İpragaz bayisi artık elinizin altında</p>
						</div>
						<div class="hero-image">
							<div class="mahallem-icon">
								<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
									<!-- Evler - Mahalle görünümü -->
									<g fill="#fff">
										<!-- Merkez büyük ev -->
										<path d="M100 40 L140 75 L140 130 L60 130 L60 75 Z"/>
										<rect x="85" y="95" width="30" height="35" fill="#ff6b35"/>
										<rect x="70" y="85" width="15" height="20" fill="#ff6b35"/>
										<rect x="115" y="85" width="15" height="20" fill="#ff6b35"/>
										<!-- Çatı detayı -->
										<path d="M100 30 L150 70 L145 70 L100 35 L55 70 L50 70 Z" fill="#fff"/>
										<!-- Sol küçük ev -->
										<path d="M35 85 L55 65 L55 130 L15 130 L15 85 Z"/>
										<rect x="28" y="100" width="15" height="30" fill="#ff6b35"/>
										<!-- Sağ küçük ev -->
										<path d="M165 85 L145 65 L145 130 L185 130 L185 85 Z"/>
										<rect x="157" y="100" width="15" height="30" fill="#ff6b35"/>
										<!-- Zemin çizgisi -->
										<rect x="10" y="130" width="180" height="8" rx="4"/>
										<!-- Konum işareti -->
										<circle cx="100" cy="155" r="12" fill="#fff"/>
										<circle cx="100" cy="155" r="6" fill="#e31e24"/>
										<path d="M100 140 L100 168" stroke="#fff" stroke-width="3"/>
										<!-- Yıldızlar -->
										<circle cx="30" cy="50" r="3"/>
										<circle cx="170" cy="45" r="3"/>
										<circle cx="50" cy="30" r="2"/>
										<circle cx="150" cy="25" r="2"/>
									</g>
								</svg>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Dots -->
			<div class="hero-dots">
				<div class="hero-dot active" data-slide="0"></div>
				<div class="hero-dot" data-slide="1"></div>
				<div class="hero-dot" data-slide="2"></div>
				<div class="hero-dot" data-slide="3"></div>
			</div>
		</div>
	</section>

	<!-- Repeat Last Order Section + Offer Countdown -->
	<section class="repeat-order-section" id="repeatOrderSection">
		<div class="container">
			<div class="offer-countdown-wrapper">
				<!-- Offer Countdown Button (hidden by default) -->
				<a href="isyerim-musteri-teklif-iste.html" class="btn-offer-countdown" id="btnOfferCountdown">
					<div class="btn-offer-countdown-content">
						<div class="btn-offer-countdown-icon">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<circle cx="12" cy="12" r="10"/>
								<polyline points="12 6 12 12 16 14"/>
							</svg>
						</div>
						<div class="btn-offer-countdown-text">
							<h3>Teklif Onay Bekliyor</h3>
							<p>Teklifinizi onaylamaniz bekleniyor</p>
						</div>
					</div>
					<div class="countdown-timer" id="countdownTimer">--:--</div>
				</a>
				<!-- Repeat Order Button -->
				<button class="btn-repeat-order" id="btnRepeatOrder" onclick="openRepeatOrderModal()">
					<div class="btn-repeat-order-content">
						<div class="btn-repeat-order-icon">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M23 4v6h-6"/>
								<path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
							</svg>
						</div>
						<div class="btn-repeat-order-text">
							<h3>Son Siparisimi Tekrarla</h3>
							<p id="repeatOrderDescription">Son siparisini tek tikla tekrarlayiniz</p>
						</div>
					</div>
					<div class="btn-repeat-order-arrow">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<path d="M9 18l6-6-6-6"/>
						</svg>
					</div>
				</button>
			</div>
		</div>
	</section>

	<!-- Products Section -->
	<section class="products-section">
		<div class="container">
			<div class="section-header">
				<h2 class="section-title">İşYerim Ürünleri</h2>
				<a href="#" class="section-link">
					Tümünü Gör
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;">
						<path d="M9 18l6-6-6-6"/>
					</svg>
				</a>
			</div>
			<div class="products-grid" id="products-grid">
				<!-- Ürünler Supabase'den dinamik olarak yüklenir -->
				<div class="loading-placeholder" style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">
					<p>Ürünler yükleniyor...</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Campaigns Section -->
	<section class="campaigns-section">
		<div class="container">
			<div class="section-header">
				<h2 class="section-title">Kampanyalar</h2>
				<a href="#" class="section-link">
					Tümünü Gör
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;">
						<path d="M9 18l6-6-6-6"/>
					</svg>
				</a>
			</div>
			<div class="campaigns-grid">
				<!-- Campaign 1 -->
				<div class="campaign-card">
					<div class="campaign-header">
						<div>
							<div class="campaign-title">İpragaz İşYerim'de<br>her alışverişe<br>kilo kilo puan!</div>
							<span class="campaign-badge">Puan Kampanyası Başlasın!</span>
						</div>
						<div class="campaign-logo">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
								<path d="M12 6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
							</svg>
						</div>
					</div>
					<div class="campaign-meta">
						<span>
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
								<line x1="16" y1="2" x2="16" y2="6"/>
								<line x1="8" y1="2" x2="8" y2="6"/>
								<line x1="3" y1="10" x2="21" y2="10"/>
							</svg>
							Kampanya Bitiş Tarihi: 9.12.2025
						</span>
						<span>
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<circle cx="12" cy="12" r="10"/>
								<polyline points="12 6 12 12 16 14"/>
							</svg>
							Son 11 Gün
						</span>
					</div>
					<p class="campaign-desc">İpragaz İşYerim'in müşterisi olduğu her tüp gaz alımında her bir kg başına 20 puan alın İpragaz uygulaması kullanın, kullandıkça kazanın!</p>
				</div>
				<!-- Campaign 2 -->
				<div class="campaign-card">
					<div class="campaign-header">
						<div>
							<div class="campaign-title">İpragaz İşYerim'i kullanın<br>200 TL'lik<br>puan kazanın!</div>
							<span class="campaign-badge">Puan Kampanyası Başlasın!</span>
						</div>
						<div class="campaign-logo">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
								<path d="M12 6v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
							</svg>
						</div>
					</div>
					<div class="campaign-meta">
						<span>
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
								<line x1="16" y1="2" x2="16" y2="6"/>
								<line x1="8" y1="2" x2="8" y2="6"/>
								<line x1="3" y1="10" x2="21" y2="10"/>
							</svg>
							Kampanya Bitiş Tarihi: 9.12.2025
						</span>
						<span>
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<circle cx="12" cy="12" r="10"/>
								<polyline points="12 6 12 12 16 14"/>
							</svg>
							Son 11 Gün
						</span>
					</div>
					<p class="campaign-desc">İşYerim uygulamasından ilk siparişiniz özel 200 puan hediye! İşYerim uygulamasından ilk tüp gaz siparişinize, 200 TL değerinde hediye puan kazanın.</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Features Section -->
	<section class="features-section">
		<div class="container">
			<div class="features-grid">
				<div class="feature-card">
					<div class="feature-icon">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
						</svg>
					</div>
					<div>
						<div class="feature-title">Size Özel</div>
						<div class="feature-desc">Biriktirdiğiniz puanları tüp alımında ya da anlaşmalı marketlerde kullanabilirsiniz.</div>
					</div>
				</div>
				<div class="feature-card">
					<div class="feature-icon">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
							<circle cx="9" cy="7" r="4"/>
							<path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
							<path d="M16 3.13a4 4 0 0 1 0 7.75"/>
						</svg>
					</div>
					<div>
						<div class="feature-title">Müşterilerine Özel</div>
						<div class="feature-desc">Müşterilerinize özel tanımladığınız indirim kodlarını müşterilerinizle paylaşabilirsiniz.</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- CTA Banner -->
	<section class="cta-banner">
		<div class="container">
			<div class="cta-content">
				<p class="cta-text">İpragaz İşYerim uygulamasından siparişlerinizi oluşturun, size özel kampanya ve indirimlerden yararlanın! Her siparişinize özel puan kazanın!</p>
				<button class="btn-cta">Günleri Etkin</button>
			</div>
			<div class="cta-phone">
				<div class="cta-phone-label">Acil durumlarda 7/24 yanınızdayız.</div>
				<div class="cta-phone-number">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
					</svg>
					444 47 72
				</div>
			</div>
		</div>
	</section>

	<!-- Info Section -->
	<section class="info-section">
		<div class="container">
			<h3 class="info-title">
				İpragaz İşYerim
				<span class="info-badge">İşYerim</span>
			</h3>
			<p class="info-text">
				İpragaz İşYerim ile işletmenizin enerji çözümlerini kolayca yönetin! Avantajlı fiyatlarla hızlıca tüp sipariş verin, işletmek aksatmadan yürütün. İnşaat, sanayi, turizm ve yeme-içme sektörlerine özel çözümleriyle her türlü ihtiyacınıza en uygun tüpe sahip olun. Geçmiş siparişlerinizi görüntüleyin, tekrar siparişlerinizi kolayca oluşturun. İpragaz güvencesiyle hızlı teslimatın yanında size işyerinize özel kampanyalar ve avantajlar keşfedin.
			</p>
			<a href="#" class="info-link">
				Devamını Gör
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;">
					<path d="M9 18l6-6-6-6"/>
				</svg>
			</a>
		</div>
	</section>

	<!-- Footer (Component) -->
	<div id="isyerim-footer"></div>

	<!-- Repeat Order Modal -->
	<div class="repeat-order-overlay" id="repeatOrderOverlay">
		<div class="repeat-order-modal">
			<div class="repeat-order-header">
				<h2>Son Siparisi Tekrarla</h2>
				<button class="repeat-order-close" onclick="closeRepeatOrderModal()">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M18 6L6 18M6 6l12 12"/>
					</svg>
				</button>
			</div>
			<div class="repeat-order-body" id="repeatOrderBody">
				<!-- Content will be dynamically loaded -->
			</div>
		</div>
	</div>

	<!-- Supabase -->
	<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
	<script src="./js/supabase-client.js"></script>
	<script src="./js/services/products-service.js"></script>
	<script src="./js/services/customers-service.js"></script>
	<script src="./js/services/customer-prices-service.js"></script>
	<script src="./js/services/cart-service.js?v=4"></script>
	<script src="./js/services/branches-service.js"></script>
	<script src="./js/services/favorites-service.js"></script>
	<script src="./js/services/notifications-service.js"></script>
	<script src="./js/services/dealers-service.js"></script>
	<script src="./js/services/orders-service.js"></script>
	<script src="./js/services/offers-service.js"></script>
	<script src="./js/services/customer-users-service.js"></script>
	<script src="./js/component-loader.js"></script>
	<script>
		// Hero Slider
		(function() {
			var slides = document.getElementById('heroSlides');
			var dots = document.querySelectorAll('.hero-dot');
			var currentSlide = 0;
			var totalSlides = 4;
			var autoSlideInterval;

			function goToSlide(index) {
				currentSlide = index;
				slides.style.transform = 'translateX(-' + (currentSlide * 100) + '%)';

				// Update dots
				dots.forEach(function(dot, i) {
					dot.classList.toggle('active', i === currentSlide);
				});
			}

			function nextSlide() {
				currentSlide = (currentSlide + 1) % totalSlides;
				goToSlide(currentSlide);
			}

			// Auto-slide every 5 seconds
			function startAutoSlide() {
				autoSlideInterval = setInterval(nextSlide, 5000);
			}

			function stopAutoSlide() {
				clearInterval(autoSlideInterval);
			}

			// Dot click handlers
			dots.forEach(function(dot) {
				dot.addEventListener('click', function() {
					var slideIndex = parseInt(this.getAttribute('data-slide'));
					goToSlide(slideIndex);
					// Reset auto-slide timer
					stopAutoSlide();
					startAutoSlide();
				});
			});

			// Start auto-slide
			startAutoSlide();

			// Pause on hover
			var heroSection = document.querySelector('.hero');
			heroSection.addEventListener('mouseenter', stopAutoSlide);
			heroSection.addEventListener('mouseleave', startAutoSlide);
		})();

		// Global değişkenler
		var products = [];
		var customerPrices = {};
		var currentCustomerId = null;
		var tekliftenCekildi = sessionStorage.getItem('tekliften_cekildi') === 'true';
		var favoriteIds = []; // Favori urun ID'leri

		// Ürünleri Supabase'den yükle
		async function loadProducts() {
			try {
				// Ürünleri çek
				const { data: productsData, error } = await ProductsService.getAll();
				if (error) throw new Error(error);

				products = productsData || [];

				// Müşteri fiyatlarını çek (varsa)
				var customerId = sessionStorage.getItem('customer_id');
				if (customerId && !tekliftenCekildi) {
					currentCustomerId = customerId;
					const { data: pricesData } = await CustomerPricesService.getByCustomerId(customerId);
					if (pricesData) {
						pricesData.forEach(function(cp) {
							if (cp.is_active) {
								customerPrices[cp.product_id] = cp.unit_price;
							}
						});
					}
				}

				// Favorileri yükle (giriş yapılmışsa)
				var isyerimCustomerId = sessionStorage.getItem('isyerim_customer_id');
				if (isyerimCustomerId) {
					const { data: favIds } = await FavoritesService.getFavoriteIds(isyerimCustomerId);
					if (favIds) {
						favoriteIds = favIds;
					}
				}

				// Ürünleri render et
				renderProducts();
			} catch (err) {
				console.error('Ürün yükleme hatası:', err);
				document.getElementById('products-grid').innerHTML =
					'<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;"><p>Ürünler yüklenirken hata oluştu</p></div>';
			}
		}

		// Ürün kartı oluştur
		function createProductCard(product) {
			// Fiyat belirleme: Müşteri fiyatı varsa onu kullan, yoksa base_price
			var price = customerPrices[product.id] || product.base_price;
			var priceLabel = customerPrices[product.id] && !tekliftenCekildi ? 'Bayi Fiyatı' : 'Tavan Fiyatları';
			var formattedPrice = parseFloat(price).toLocaleString('tr-TR', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});

			// Ürün resim URL'i
			var imageUrl = product.image_url || './İpragaz Bayi_files/IPR-BAYI-12-kg-ipr-uzun.png';

			// Favori durumu kontrol
			var isFavorite = favoriteIds.indexOf(product.id) !== -1;
			var favoriteClass = isFavorite ? 'product-favorite active' : 'product-favorite';

			return '<div class="product-card" data-product-id="' + product.id + '" style="cursor: pointer;">' +
				'<button class="' + favoriteClass + '">' +
					'<svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>' +
				'</button>' +
				'<div class="product-image">' +
					'<img src="' + imageUrl + '" alt="' + product.name + '">' +
				'</div>' +
				'<div class="product-name">' + product.name + '</div>' +
				'<div class="product-price">₺' + formattedPrice + ' ' + priceLabel + '</div>' +
				'<button class="btn-add-cart">Sepete Ekle</button>' +
			'</div>';
		}

		// Ürünleri render et
		function renderProducts() {
			var grid = document.getElementById('products-grid');
			grid.innerHTML = '';

			if (products.length === 0) {
				grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;"><p>Ürün bulunamadı</p></div>';
				return;
			}

			products.forEach(function(product) {
				grid.innerHTML += createProductCard(product);
			});

			// Event listener'ları bağla
			bindProductEvents();
		}

		// Ürün event'lerini bağla
		function bindProductEvents() {
			// Ürün kartına tıklama - detay sayfasına git
			document.querySelectorAll('.product-card').forEach(function(card) {
				card.addEventListener('click', function(e) {
					var productId = this.getAttribute('data-product-id');
					window.location.href = 'isyerim-musteri-urun-detay.html?id=' + productId;
				});
			});

			// Favorite Toggle
			document.querySelectorAll('.product-favorite').forEach(function(btn) {
				btn.addEventListener('click', async function(e) {
					e.preventDefault();
					e.stopPropagation(); // Kartın tıklanmasını engelle

					var customerId = sessionStorage.getItem('isyerim_customer_id');
					if (!customerId) {
						alert('Favorilere eklemek icin giris yapmaniz gerekiyor.');
						return;
					}

					var productCard = this.closest('.product-card');
					var productId = productCard.getAttribute('data-product-id');
					var btn = this;

					// Toggle favorite
					var result = await FavoritesService.toggleFavorite(customerId, productId);
					if (result.error) {
						console.error('Favori hatasi:', result.error);
						return;
					}

					// UI guncelle
					if (result.data.isFavorite) {
						btn.classList.add('active');
						favoriteIds.push(productId);
					} else {
						btn.classList.remove('active');
						var idx = favoriteIds.indexOf(productId);
						if (idx !== -1) favoriteIds.splice(idx, 1);
					}
				});
			});

			// Sepete Ekle
			document.querySelectorAll('.btn-add-cart').forEach(function(btn) {
				btn.addEventListener('click', async function(e) {
					e.preventDefault();
					e.stopPropagation(); // Kartın tıklanmasını engelle

					var productCard = this.closest('.product-card');
					var productId = productCard.getAttribute('data-product-id');

					// Ürünü bul
					var product = products.find(function(p) { return p.id === productId; });
					if (!product) return;

					// Fiyatı belirle
					var price = customerPrices[product.id] || product.base_price;

					// Ürünü sepete ekle (async)
					await CartService.addItem({
						id: product.id,
						code: product.code,
						name: product.name,
						price: price,
						points: product.points_per_unit || 0,
						image_url: product.image_url
					});

					// Badge'i güncelle
					updateCartBadge();

					// Buton animasyonu göster
					showAddedFeedback(this);
				});
			});
		}

		// Sepet badge güncelleme
		function updateCartBadge() {
			var badge = document.getElementById('cartBadge');
			if (!badge) return; // Component henuz yuklenmemis olabilir

			var count = CartService.getItemCount();
			if (count > 0) {
				badge.textContent = count;
				badge.style.display = 'flex';
			} else {
				badge.style.display = 'none';
			}
		}

		// Buton animasyonu
		function showAddedFeedback(button) {
			var originalText = button.textContent;
			button.textContent = 'Eklendi ✓';
			button.classList.add('added');

			setTimeout(function() {
				button.textContent = originalText;
				button.classList.remove('added');
			}, 1500);
		}

		// Sayfa yüklendiğinde
		document.addEventListener('DOMContentLoaded', async function() {
			// Müşteri ID'sini al
			var customerId = sessionStorage.getItem('isyerim_customer_id');

			// Veritabanından sepeti yükle (login olmuşsa)
			if (customerId) {
				console.log('Sepet veritabanından yükleniyor...');
				await CartService.loadFromDatabase(customerId);
			}

			// Ürünleri yükle
			loadProducts();

			// Sepet badge'ini güncelle
			updateCartBadge();

			// Son siparisi yukle (buton icin)
			loadLastOrder();

			// Pending teklif countdown kontrolu (sadece owner icin)
			loadPendingOfferCountdown();
		});

		// Sepet güncellendiğinde badge'i güncelle
		window.addEventListener('cartUpdated', function() {
			updateCartBadge();
		});

		// Profile Dropdown Toggle artik component-loader.js tarafindan yonetiliyor

		// =============================================
		// REPEAT ORDER FUNCTIONALITY
		// =============================================
		var lastOrder = null;
		var selectedTimeSlot = null;

		// Son siparisi yukle
		async function loadLastOrder() {
			// DEBUG: Tüm ilgili sessionStorage değerlerini logla
			console.log('=== REPEAT ORDER DEBUG ===');
			console.log('isyerim_customer_id:', sessionStorage.getItem('isyerim_customer_id'));
			console.log('isyerim_customer_user_id:', sessionStorage.getItem('isyerim_customer_user_id'));
			console.log('customer_id:', sessionStorage.getItem('customer_id'));
			console.log('isyerim_branch_id:', sessionStorage.getItem('isyerim_branch_id'));
			console.log('==========================');

			var customerId = sessionStorage.getItem('isyerim_customer_id');
			if (!customerId) {
				console.log('Musteri giris yapmamis, son siparis yuklenmiyor');
				return;
			}

			try {
				console.log('OrdersService.getByCustomerId cagiriliyor, customerId:', customerId);
				const { data: orders, error } = await OrdersService.getByCustomerId(customerId, 1);
				console.log('OrdersService sonucu:', { orders, error });

				if (error) {
					console.error('Son siparis yukleme hatasi:', error);
					return;
				}

				if (orders && orders.length > 0) {
					lastOrder = orders[0];
					// Butonu goster
					document.getElementById('repeatOrderSection').classList.add('visible');
					console.log('Son siparis yuklendi, buton gosteriliyor:', lastOrder);

					// Dinamik metin olustur
					var branchName = sessionStorage.getItem('selected_branch_name') || sessionStorage.getItem('isyerim_branch_name') || null;
					var dealerName = lastOrder.dealer ? lastOrder.dealer.name : 'bayiniz';
					var orderDate = formatOrderDate(lastOrder.created_at);
					var descText = '';
					if (branchName) {
						descText = '<strong>' + branchName + '</strong> subeniz icin <strong>' + dealerName + '</strong> bayisinden verdiginiz <strong>' + orderDate + '</strong> tarihli siparisinizi tekrarlayabilirsiniz.';
					} else {
						descText = '<strong>' + dealerName + '</strong> bayisinden verdiginiz <strong>' + orderDate + '</strong> tarihli siparisinizi tekrarlayabilirsiniz.';
					}
					document.getElementById('repeatOrderDescription').innerHTML = descText;
				} else {
					console.log('Son siparis bulunamadi - orders bos veya null');
				}
			} catch (err) {
				console.error('Son siparis yukleme exception:', err);
			}
		}

		// Repeat order modal ac
		function openRepeatOrderModal() {
			if (!lastOrder) {
				alert('Son siparis bulunamadi');
				return;
			}

			// Modal icerigini olustur
			var bodyHtml = '';

			// Sube bilgisi (en ustte)
			var branchName = sessionStorage.getItem('selected_branch_name') || '';
			var branchAddress = sessionStorage.getItem('selected_branch_address') || '';
			if (branchName) {
				bodyHtml += '<div class="repeat-order-branch">' +
					'<div class="repeat-order-branch-icon">' +
						'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">' +
							'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>' +
							'<polyline points="9 22 9 12 15 12 15 22"/>' +
						'</svg>' +
						'<span class="repeat-order-branch-label">Teslimat Adresi</span>' +
					'</div>' +
					'<div class="repeat-order-branch-name">' + branchName + '</div>' +
					(branchAddress ? '<div class="repeat-order-branch-address">' + branchAddress + '</div>' : '') +
				'</div>';
			}

			// Bayi bilgisi
			var dealer = lastOrder.dealer || {};
			var dealerName = dealer.name || 'Bayi';
			var dealerPhone = dealer.phone || '';
			var dealerLocation = '';
			if (dealer.district && dealer.city) {
				dealerLocation = dealer.district + ', ' + dealer.city;
			} else if (dealer.city) {
				dealerLocation = dealer.city;
			}

			bodyHtml += '<div class="repeat-order-dealer">' +
				'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">' +
					'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>' +
					'<circle cx="12" cy="10" r="3"/>' +
				'</svg>' +
				'<div class="repeat-order-dealer-info">' +
					'<div class="repeat-order-dealer-name">Bayi: ' + dealerName + '</div>' +
					(dealerPhone ? '<div class="repeat-order-dealer-phone">Tel: ' + dealerPhone + '</div>' : '') +
					(dealerLocation ? '<div class="repeat-order-dealer-location">' + dealerLocation + '</div>' : '') +
				'</div>' +
			'</div>';

			// Siparis kalemleri
			bodyHtml += '<div class="repeat-order-items-title">Siparis Kalemleri</div>';
			bodyHtml += '<div class="repeat-order-items">';

			var total = 0;
			if (lastOrder.order_items && lastOrder.order_items.length > 0) {
				lastOrder.order_items.forEach(function(item) {
					var imageUrl = item.product && item.product.image_url ? item.product.image_url : './İpragaz Bayi_files/IPR-BAYI-12-kg-ipr-uzun.png';
					var productName = item.product ? item.product.name : 'Urun';
					var itemTotal = parseFloat(item.total_price) || (item.quantity * item.unit_price);
					total += itemTotal;

					bodyHtml += '<div class="repeat-order-item">' +
						'<div class="repeat-order-item-image">' +
							'<img src="' + imageUrl + '" alt="' + productName + '">' +
						'</div>' +
						'<div class="repeat-order-item-info">' +
							'<div class="repeat-order-item-name">' + productName + '</div>' +
							'<div class="repeat-order-item-qty">x' + item.quantity + '</div>' +
						'</div>' +
						'<div class="repeat-order-item-price">' + formatPrice(itemTotal) + '</div>' +
					'</div>';
				});
			}
			bodyHtml += '</div>';

			// Zaman slotlari
			bodyHtml += '<div class="time-slots-title">Teslimat Zamani Secin</div>';
			bodyHtml += '<div class="time-slots" id="timeSlots">';
			var timeSlots = generateTimeSlots();
			timeSlots.forEach(function(slot, index) {
				var selectedClass = index === 0 ? ' selected' : '';
				bodyHtml += '<div class="time-slot' + selectedClass + '" data-slot-index="' + index + '" onclick="selectTimeSlot(' + index + ')">' +
					'<div class="time-slot-hour">' + slot.hour + '</div>' +
					'<div class="time-slot-day">' + slot.label + '</div>' +
				'</div>';
			});
			bodyHtml += '</div>';

			// Ilk slotu varsayilan olarak sec
			selectedTimeSlot = timeSlots[0];

			// Toplam
			bodyHtml += '<div class="repeat-order-total">' +
				'<span class="repeat-order-total-label">Toplam</span>' +
				'<span class="repeat-order-total-value">' + formatPrice(total) + '</span>' +
			'</div>';

			// Butonlar
			bodyHtml += '<div class="repeat-order-actions">' +
				'<button class="btn-repeat-edit" onclick="editRepeatOrder()">Siparisi Duzenle</button>' +
				'<button class="btn-repeat-submit" id="btnRepeatSubmit" onclick="submitRepeatOrder()">Siparis Ver</button>' +
			'</div>';

			document.getElementById('repeatOrderBody').innerHTML = bodyHtml;
			document.getElementById('repeatOrderOverlay').classList.add('active');
			document.body.style.overflow = 'hidden';
		}

		// Modal kapat
		function closeRepeatOrderModal() {
			document.getElementById('repeatOrderOverlay').classList.remove('active');
			document.body.style.overflow = '';
		}

		// Overlay'e tiklayinca kapat
		document.getElementById('repeatOrderOverlay').addEventListener('click', function(e) {
			if (e.target === this) {
				closeRepeatOrderModal();
			}
		});

		// Zaman slotlarini olustur (sabit 3'er saatlik araliklar)
		function generateTimeSlots() {
			return [
				{ hour: '09:00 - 12:00', label: 'Sabah' },
				{ hour: '12:00 - 15:00', label: 'Ogle' },
				{ hour: '15:00 - 18:00', label: 'Aksam' }
			];
		}

		// Bugun mu kontrolu
		function isToday(date) {
			var today = new Date();
			return date.getDate() === today.getDate() &&
				   date.getMonth() === today.getMonth() &&
				   date.getFullYear() === today.getFullYear();
		}

		// Zaman slotu sec
		function selectTimeSlot(index) {
			var slots = document.querySelectorAll('.time-slot');
			slots.forEach(function(slot, i) {
				slot.classList.toggle('selected', i === index);
			});

			var timeSlots = generateTimeSlots();
			selectedTimeSlot = timeSlots[index];
		}

		// Fiyat formatlama
		function formatPrice(amount) {
			return '₺' + parseFloat(amount).toLocaleString('tr-TR', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
		}

		// Siparis tarihi formatlama (gg.aa.yyyy)
		function formatOrderDate(dateString) {
			var date = new Date(dateString);
			var day = date.getDate().toString().padStart(2, '0');
			var month = (date.getMonth() + 1).toString().padStart(2, '0');
			var year = date.getFullYear();
			return day + '.' + month + '.' + year;
		}

		// Siparisi gonder
		async function submitRepeatOrder() {
			if (!lastOrder || !selectedTimeSlot) {
				alert('Lutfen bir teslimat zamani secin');
				return;
			}

			var submitBtn = document.getElementById('btnRepeatSubmit');
			submitBtn.disabled = true;
			submitBtn.textContent = 'Gonderiliyor...';

			try {
				// Sepete urunleri ekle
				for (var i = 0; i < lastOrder.order_items.length; i++) {
					var item = lastOrder.order_items[i];
					await CartService.addItem({
						id: item.product.id,
						code: item.product.code,
						name: item.product.name,
						price: item.unit_price,
						points: item.points || 0,
						image_url: item.product.image_url
					}, item.quantity);
				}

				// Badge'i guncelle
				updateCartBadge();

				// Modalı kapat
				closeRepeatOrderModal();

				// Sepet sayfasina yonlendir
				alert('Urunler sepete eklendi! Sepet sayfasina yonlendiriliyorsunuz...');
				window.location.href = 'isyerim-musteri-sepet.html';

			} catch (err) {
				console.error('Siparis gonderme hatasi:', err);
				alert('Siparis gonderilirken bir hata olustu. Lutfen tekrar deneyin.');
				submitBtn.disabled = false;
				submitBtn.textContent = 'Siparis Ver';
			}
		}

		// Siparisi duzenle - sepeti temizle, urunleri ekle ve sepet sayfasina yonlendir
		async function editRepeatOrder() {
			if (!lastOrder) {
				alert('Son siparis bulunamadi');
				return;
			}

			try {
				// 1. Mevcut sepeti temizle
				await CartService.clearCart();

				// 2. Siparis urunlerini sepete ekle
				for (var i = 0; i < lastOrder.order_items.length; i++) {
					var item = lastOrder.order_items[i];
					await CartService.addItem({
						id: item.product.id,
						code: item.product.code,
						name: item.product.name,
						price: item.unit_price,
						points: item.points || 0,
						image_url: item.product.image_url
					}, item.quantity);
				}

				// 3. Badge'i guncelle
				updateCartBadge();

				// 4. Modali kapat
				closeRepeatOrderModal();

				// 5. Sepet sayfasina yonlendir
				window.location.href = 'isyerim-musteri-sepet.html';

			} catch (err) {
				console.error('Siparis duzenleme hatasi:', err);
				alert('Siparis duzenlenirken bir hata olustu. Lutfen tekrar deneyin.');
			}
		}

		// =============================================
		// PENDING OFFER COUNTDOWN FUNCTIONALITY
		// =============================================
		var countdownInterval = null;
		var pendingOffer = null;

		// Pending teklif kontrolu ve countdown baslatma
		async function loadPendingOfferCountdown() {
			// Sadece owner kullanicilar icin
			var userRole = sessionStorage.getItem('isyerim_user_role');
			if (userRole !== 'owner') {
				console.log('Countdown: Kullanici owner degil, gosterilmiyor');
				return;
			}

			var customerId = sessionStorage.getItem('isyerim_customer_id');
			if (!customerId) {
				console.log('Countdown: Musteri ID bulunamadi');
				return;
			}

			try {
				// Pending teklifleri getir
				const { data: offers, error } = await OffersService.getByCustomerId(customerId, { status: 'pending' });

				if (error) {
					console.error('Pending teklif yukleme hatasi:', error);
					return;
				}

				if (offers && offers.length > 0) {
					// En son pending teklifi al
					pendingOffer = offers[0];
					console.log('Pending teklif bulundu:', pendingOffer);

					// price_updated_at varsa onu kullan, yoksa created_at
					var startTime = pendingOffer.price_updated_at || pendingOffer.created_at;
					if (!startTime) {
						console.log('Countdown: Baslangic zamani bulunamadi');
						return;
					}

					// 24 saat sonrasini hesapla (deadline)
					var startDate = new Date(startTime);
					var deadline = new Date(startDate.getTime() + (24 * 60 * 60 * 1000));

					// Countdown kutusunu goster
					var countdownBtn = document.getElementById('btnOfferCountdown');
					countdownBtn.classList.add('visible');

					// Section'i da goster (eger son siparis yoksa bile)
					document.getElementById('repeatOrderSection').classList.add('visible');

					// Countdown'i baslat
					startCountdown(deadline);
				} else {
					console.log('Pending teklif bulunamadi');
				}
			} catch (err) {
				console.error('Pending teklif yukleme exception:', err);
			}
		}

		// Countdown baslat
		function startCountdown(deadline) {
			// Hemen bir kere guncelle
			updateCountdownDisplay(deadline);

			// Her saniye guncelle
			countdownInterval = setInterval(function() {
				updateCountdownDisplay(deadline);
			}, 1000);
		}

		// Countdown gostergesini guncelle
		function updateCountdownDisplay(deadline) {
			var now = new Date().getTime();
			var timeLeft = deadline.getTime() - now;

			var timerElement = document.getElementById('countdownTimer');
			var countdownBtn = document.getElementById('btnOfferCountdown');

			if (timeLeft <= 0) {
				// Sure doldu
				timerElement.textContent = 'Sure doldu!';
				timerElement.style.background = 'rgba(255, 0, 0, 0.3)';
				clearInterval(countdownInterval);
				return;
			}

			// Saat ve dakika hesapla
			var hours = Math.floor(timeLeft / (1000 * 60 * 60));
			var minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

			// Format: "23 saat 12 dk"
			var displayText = hours + ' saat ' + minutes + ' dk';
			timerElement.textContent = displayText;
		}
	</script>
</body>
</html>
