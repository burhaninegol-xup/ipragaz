<!-- Back Office Sidebar Component -->
<!-- Include edilecek: Her backoffice sayfasinda #backoffice-sidebar div icine -->

<style>
    /* =====================================================
       BACK OFFICE SIDEBAR STYLES
       ===================================================== */

    :root {
        /* Primary - Kurumsal Kirmizi */
        --bo-primary: #e31e24;
        --bo-primary-dark: #b91820;
        --bo-primary-light: #ff4444;

        /* Sidebar - Dark Theme */
        --bo-sidebar-bg: #1a1a1a;
        --bo-sidebar-hover: #262626;
        --bo-sidebar-text: #a3a3a3;
        --bo-sidebar-text-active: #ffffff;
        --bo-sidebar-active: rgba(227, 30, 36, 0.15);
        --bo-sidebar-border: #333333;

        /* Dimensions */
        --bo-sidebar-width: 260px;
        --bo-sidebar-collapsed: 72px;
        --bo-header-height: 64px;
    }

    /* Sidebar Container */
    .bo-sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--bo-sidebar-width);
        background: var(--bo-sidebar-bg);
        display: flex;
        flex-direction: column;
        z-index: 1000;
        transition: width 0.3s ease;
        overflow: hidden;
    }

    .bo-sidebar.collapsed {
        width: var(--bo-sidebar-collapsed);
    }

    /* Logo Area */
    .bo-sidebar-logo {
        height: var(--bo-header-height);
        display: flex;
        align-items: center;
        padding: 0 20px;
        border-bottom: 1px solid var(--bo-sidebar-border);
        flex-shrink: 0;
    }

    .bo-sidebar-logo img {
        height: 32px;
        width: auto;
        transition: opacity 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-sidebar-logo img.logo-full {
        opacity: 0;
        width: 0;
    }

    .bo-sidebar-logo img.logo-icon {
        display: none;
        height: 32px;
    }

    .bo-sidebar.collapsed .bo-sidebar-logo img.logo-icon {
        display: block;
    }

    .bo-sidebar-logo .logo-text {
        color: #ffffff;
        font-size: 18px;
        font-weight: 600;
        margin-left: 12px;
        white-space: nowrap;
        opacity: 1;
        transition: opacity 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-sidebar-logo .logo-text {
        opacity: 0;
    }

    /* Navigation */
    .bo-sidebar-nav {
        flex: 1;
        padding: 16px 0;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .bo-nav-section {
        margin-bottom: 8px;
    }

    .bo-nav-section-title {
        color: var(--bo-sidebar-text);
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        padding: 8px 20px;
        opacity: 0.6;
        white-space: nowrap;
        overflow: hidden;
    }

    .bo-sidebar.collapsed .bo-nav-section-title {
        opacity: 0;
        height: 0;
        padding: 0;
    }

    /* Nav Items */
    .bo-nav-item {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: var(--bo-sidebar-text);
        text-decoration: none;
        transition: all 0.2s ease;
        position: relative;
        margin: 2px 8px;
        border-radius: 8px;
    }

    .bo-nav-item:hover {
        background: var(--bo-sidebar-hover);
        color: var(--bo-sidebar-text-active);
    }

    .bo-nav-item.active {
        background: var(--bo-sidebar-active);
        color: var(--bo-primary);
    }

    .bo-nav-item.active::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 3px;
        height: 24px;
        background: var(--bo-primary);
        border-radius: 0 2px 2px 0;
    }

    .bo-nav-item-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .bo-nav-item-icon svg {
        width: 20px;
        height: 20px;
        stroke: currentColor;
        fill: none;
        stroke-width: 2;
    }

    .bo-nav-item-text {
        margin-left: 12px;
        font-size: 14px;
        font-weight: 500;
        white-space: nowrap;
        opacity: 1;
        transition: opacity 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-nav-item-text {
        opacity: 0;
    }

    .bo-nav-item-badge {
        margin-left: auto;
        background: var(--bo-primary);
        color: #ffffff;
        font-size: 11px;
        font-weight: 600;
        padding: 2px 8px;
        border-radius: 10px;
        opacity: 1;
        transition: opacity 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-nav-item-badge {
        opacity: 0;
    }

    /* Toggle Button */
    .bo-sidebar-toggle {
        position: absolute;
        right: -12px;
        top: 80px;
        width: 24px;
        height: 24px;
        background: var(--bo-sidebar-bg);
        border: 1px solid var(--bo-sidebar-border);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        transition: transform 0.3s ease;
    }

    .bo-sidebar-toggle:hover {
        background: var(--bo-sidebar-hover);
    }

    .bo-sidebar-toggle svg {
        width: 14px;
        height: 14px;
        stroke: var(--bo-sidebar-text);
        fill: none;
        stroke-width: 2;
        transition: transform 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-sidebar-toggle svg {
        transform: rotate(180deg);
    }

    /* Footer */
    .bo-sidebar-footer {
        padding: 16px;
        border-top: 1px solid var(--bo-sidebar-border);
        flex-shrink: 0;
    }

    .bo-sidebar-user {
        display: flex;
        align-items: center;
        padding: 8px;
        border-radius: 8px;
        transition: background 0.2s ease;
    }

    .bo-sidebar-user:hover {
        background: var(--bo-sidebar-hover);
    }

    .bo-sidebar-user-avatar {
        width: 36px;
        height: 36px;
        background: var(--bo-primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        font-size: 14px;
        font-weight: 600;
        flex-shrink: 0;
    }

    .bo-sidebar-user-info {
        margin-left: 12px;
        overflow: hidden;
        opacity: 1;
        transition: opacity 0.3s ease;
    }

    .bo-sidebar.collapsed .bo-sidebar-user-info {
        opacity: 0;
    }

    .bo-sidebar-user-name {
        color: var(--bo-sidebar-text-active);
        font-size: 13px;
        font-weight: 500;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .bo-sidebar-user-role {
        color: var(--bo-sidebar-text);
        font-size: 11px;
        white-space: nowrap;
    }

    /* Tooltip for collapsed state */
    .bo-sidebar.collapsed .bo-nav-item {
        position: relative;
    }

    .bo-sidebar.collapsed .bo-nav-item::after {
        content: attr(data-title);
        position: absolute;
        left: 100%;
        top: 50%;
        transform: translateY(-50%);
        background: #262626;
        color: #ffffff;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 13px;
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s ease;
        margin-left: 16px;
        z-index: 1001;
    }

    .bo-sidebar.collapsed .bo-nav-item:hover::after {
        opacity: 1;
        visibility: visible;
    }
</style>

<aside class="bo-sidebar" id="boSidebar">
    <!-- Toggle Button -->
    <button class="bo-sidebar-toggle" onclick="toggleSidebar()" title="Menu'yu Kucult/Genislet">
        <svg viewBox="0 0 24 24">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
    </button>

    <!-- Logo -->
    <div class="bo-sidebar-logo">
        <img src="https://www.ipragaz.com.tr/assets/images/logo.png" alt="Ipragaz" class="logo-full">
        <img src="https://www.ipragaz.com.tr/assets/images/favicon.png" alt="Ipragaz" class="logo-icon">
        <span class="logo-text">Back Office</span>
    </div>

    <!-- Navigation -->
    <nav class="bo-sidebar-nav">
        <!-- Ana Menu -->
        <div class="bo-nav-section">
            <div class="bo-nav-section-title">Ana Menu</div>

            <a href="backoffice-anasayfa.html" class="bo-nav-item" data-page="anasayfa" data-title="Dashboard">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Dashboard</span>
            </a>

            <a href="backoffice-bayi-listesi.html" class="bo-nav-item" data-page="bayiler" data-title="Bayiler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Bayiler</span>
            </a>

            <a href="backoffice-musteri-listesi.html" class="bo-nav-item" data-page="musteriler" data-title="Musteriler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Musteriler</span>
            </a>
        </div>

        <!-- Islemler -->
        <div class="bo-nav-section">
            <div class="bo-nav-section-title">Islemler</div>

            <a href="backoffice-teklifler.html" class="bo-nav-item" data-page="teklifler" data-title="Teklifler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Teklifler</span>
                <span class="bo-nav-item-badge" id="pendingOffersCount">0</span>
            </a>

            <a href="backoffice-siparisler.html" class="bo-nav-item" data-page="siparisler" data-title="Siparisler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Siparisler</span>
            </a>

            <a href="backoffice-urunler.html" class="bo-nav-item" data-page="urunler" data-title="Urunler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Urunler</span>
            </a>

            <a href="backoffice-kategoriler.html" class="bo-nav-item" data-page="kategoriler" data-title="Kategoriler">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Kategoriler</span>
            </a>
        </div>

        <!-- Raporlar -->
        <div class="bo-nav-section">
            <div class="bo-nav-section-title">Raporlar</div>

            <a href="backoffice-raporlar.html" class="bo-nav-item" data-page="raporlar" data-title="Raporlar">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Raporlar</span>
            </a>
        </div>

        <!-- Sistem -->
        <div class="bo-nav-section">
            <div class="bo-nav-section-title">Sistem</div>

            <a href="backoffice-sehir-fiyatlari.html" class="bo-nav-item" data-page="sehir-fiyatlari" data-title="Sehir Fiyatlari">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Sehir Fiyatlari</span>
            </a>

            <a href="backoffice-ayarlar.html" class="bo-nav-item" data-page="ayarlar" data-title="Ayarlar">
                <span class="bo-nav-item-icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </span>
                <span class="bo-nav-item-text">Ayarlar</span>
            </a>
        </div>
    </nav>

    <!-- Footer / User Info -->
    <div class="bo-sidebar-footer">
        <div class="bo-sidebar-user">
            <div class="bo-sidebar-user-avatar" id="userInitials">AD</div>
            <div class="bo-sidebar-user-info">
                <div class="bo-sidebar-user-name" id="userName">Admin</div>
                <div class="bo-sidebar-user-role">Sistem Yoneticisi</div>
            </div>
        </div>
    </div>
</aside>

<script>
    // Sidebar Toggle
    function toggleSidebar() {
        var sidebar = document.getElementById('boSidebar');
        sidebar.classList.toggle('collapsed');

        // Ana icerik alanini da guncelle
        var mainContent = document.querySelector('.bo-main-content');
        if (mainContent) {
            mainContent.classList.toggle('sidebar-collapsed');
        }

        // Tercihi kaydet
        localStorage.setItem('bo_sidebar_collapsed', sidebar.classList.contains('collapsed'));
    }

    // Sayfa yuklendiginde sidebar durumunu kontrol et
    document.addEventListener('DOMContentLoaded', function() {
        var isCollapsed = localStorage.getItem('bo_sidebar_collapsed') === 'true';
        var sidebar = document.getElementById('boSidebar');
        var mainContent = document.querySelector('.bo-main-content');

        if (isCollapsed) {
            sidebar.classList.add('collapsed');
            if (mainContent) {
                mainContent.classList.add('sidebar-collapsed');
            }
        }

        // Aktif sayfayi vurgula
        highlightActivePage();

        // Kullanici bilgilerini yukle
        loadUserInfo();
    });

    // Aktif sayfayi vurgula
    function highlightActivePage() {
        var currentPage = window.location.pathname.split('/').pop().replace('.html', '').replace('backoffice-', '');
        var navItems = document.querySelectorAll('.bo-nav-item');

        navItems.forEach(function(item) {
            item.classList.remove('active');
            if (item.getAttribute('data-page') === currentPage) {
                item.classList.add('active');
            }
        });

        // Default: anasayfa
        if (!document.querySelector('.bo-nav-item.active')) {
            var defaultItem = document.querySelector('.bo-nav-item[data-page="anasayfa"]');
            if (defaultItem) {
                defaultItem.classList.add('active');
            }
        }
    }

    // Kullanici bilgilerini yukle
    function loadUserInfo() {
        var adminData = sessionStorage.getItem('backoffice_admin_data');
        if (adminData) {
            try {
                var admin = JSON.parse(adminData);
                document.getElementById('userName').textContent = admin.name || 'Admin';
                document.getElementById('userInitials').textContent = getInitials(admin.name || 'Admin');
            } catch (e) {
                console.error('Admin data parse error:', e);
            }
        }
    }

    // Isim bas harflerini al
    function getInitials(name) {
        return name.split(' ').map(function(n) { return n[0]; }).join('').toUpperCase().substring(0, 2);
    }
</script>
