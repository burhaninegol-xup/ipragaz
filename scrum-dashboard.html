<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrum Agent Dashboard - Ä°pragaz</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://ipappbayi.ipragaz.com.tr/bayi/_ui/responsive/theme-ipragaz/images/faviconNew.jpg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="scrum_agents/web/static/dashboard.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="default.html" class="back-link">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
                Ana Sayfa
            </a>
            <h1 class="logo-text">Scrum Dashboard</h1>
        </div>

        <!-- Task Input -->
        <div class="task-input-section">
            <label for="taskInput">Talebinizi YazÄ±n</label>
            <textarea id="taskInput" placeholder="Ã–rn: MÃ¼ÅŸteri listesine arama filtresi ekle..."></textarea>

            <label for="projectContext">Proje BaÄŸlamÄ± (Opsiyonel)</label>
            <textarea id="projectContext" placeholder="Ek bilgi veya kÄ±sÄ±tlamalar..."></textarea>

            <label for="errorReport" class="error-label">Console Hata Raporu (Opsiyonel)</label>
            <textarea id="errorReport" class="error-textarea" placeholder="Sayfada aldÄ±ÄŸÄ±nÄ±z console hatalarÄ±nÄ± buraya yapÄ±ÅŸtÄ±rÄ±n...

Ã–rnek:
Uncaught TypeError: ReportsService.getDashboardStats is not a function
    at backoffice-raporlar.html:156"></textarea>

            <button id="startSprintBtn" class="start-btn">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                    <path d="M8 5v14l11-7z"/>
                </svg>
                Sprint BaÅŸlat
            </button>
        </div>

        <!-- Team Members -->
        <div class="team-section">
            <h3>TakÄ±m Ãœyeleri</h3>
            <div class="team-members">
                <div class="member" data-agent="po">
                    <span class="member-emoji">ğŸ‘©â€ğŸ’¼</span>
                    <span class="member-name">AyÅŸe</span>
                    <span class="member-role">Product Owner</span>
                </div>
                <div class="member" data-agent="tech_lead">
                    <span class="member-emoji">ğŸ‘¨â€ğŸ’»</span>
                    <span class="member-name">Mehmet</span>
                    <span class="member-role">Tech Lead</span>
                </div>
                <div class="member" data-agent="senior_dev">
                    <span class="member-emoji">ğŸ§‘â€ğŸ’»</span>
                    <span class="member-name">Ali</span>
                    <span class="member-role">Senior Dev</span>
                </div>
                <div class="member" data-agent="frontend_dev">
                    <span class="member-emoji">ğŸ‘©â€ğŸ¨</span>
                    <span class="member-name">Zeynep</span>
                    <span class="member-role">Frontend Dev</span>
                </div>
                <div class="member" data-agent="qa">
                    <span class="member-emoji">ğŸ”</span>
                    <span class="member-name">Can</span>
                    <span class="member-role">QA Engineer</span>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-section">
            <h3>Ä°statistikler</h3>
            <div class="stat-item">
                <span class="stat-label">Mesaj SayÄ±sÄ±</span>
                <span class="stat-value" id="messageCount">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Token KullanÄ±mÄ±</span>
                <span class="stat-value" id="tokenUsage">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">SÃ¼re</span>
                <span class="stat-value" id="elapsedTime">00:00</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Phase Progress -->
        <div class="phase-progress">
            <div class="phase" data-phase="task_detaylama">
                <div class="phase-icon">1</div>
                <div class="phase-label">Task Detaylama</div>
            </div>
            <div class="phase-connector"></div>
            <div class="phase" data-phase="teknik_olgunlastirma">
                <div class="phase-icon">2</div>
                <div class="phase-label">Teknik OlgunlaÅŸtÄ±rma</div>
            </div>
            <div class="phase-connector"></div>
            <div class="phase" data-phase="gelistirme">
                <div class="phase-icon">3</div>
                <div class="phase-label">GeliÅŸtirme</div>
            </div>
            <div class="phase-connector"></div>
            <div class="phase" data-phase="test">
                <div class="phase-icon">4</div>
                <div class="phase-label">Test</div>
            </div>
            <div class="phase-connector"></div>
            <div class="phase" data-phase="onay">
                <div class="phase-icon">5</div>
                <div class="phase-label">Onay</div>
            </div>
        </div>

        <!-- Approval Banner (Hidden by default) -->
        <div class="approval-banner hidden" id="approvalBanner">
            <div class="approval-content">
                <div class="approval-icon">âš ï¸</div>
                <div class="approval-text">
                    <h4>OnayÄ±nÄ±z Bekleniyor</h4>
                    <p id="approvalMessage">LÃ¼tfen devam etmek iÃ§in onay verin.</p>
                </div>
            </div>
            <div class="approval-actions">
                <textarea id="approvalComment" placeholder="Yorum ekleyin (opsiyonel)..."></textarea>
                <div class="approval-buttons">
                    <button class="approve-btn" id="approveBtn">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        Onayla
                    </button>
                    <button class="reject-btn" id="rejectBtn">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                        Reddet
                    </button>
                </div>
            </div>
        </div>

        <!-- Chat Stream -->
        <div class="chat-stream" id="chatStream">
            <div class="welcome-message">
                <h2>Scrum Agent Dashboard'a HoÅŸ Geldiniz</h2>
                <p>Sol panelden talebinizi yazÄ±n ve "Sprint BaÅŸlat" butonuna tÄ±klayÄ±n.</p>
                <p>TakÄ±m Ã¼yeleri talebinizi analiz edecek, tartÄ±ÅŸacak ve geliÅŸtirme yapacak.</p>
                <div class="agent-colors">
                    <span class="color-item po">ğŸ‘©â€ğŸ’¼ PO</span>
                    <span class="color-item tech-lead">ğŸ‘¨â€ğŸ’» Tech Lead</span>
                    <span class="color-item senior-dev">ğŸ§‘â€ğŸ’» Senior Dev</span>
                    <span class="color-item frontend-dev">ğŸ‘©â€ğŸ¨ Frontend</span>
                    <span class="color-item qa">ğŸ” QA</span>
                </div>
            </div>
        </div>

        <!-- New Messages Indicator (Smart Scroll) -->
        <div class="new-messages-indicator hidden" id="newMessagesIndicator">
            <button class="new-messages-btn" id="scrollToBottomBtn">
                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                </svg>
                <span>Yeni Mesajlar</span>
                <span class="unread-badge" id="unreadBadge">0</span>
            </button>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span class="status-indicator" id="statusIndicator">
                <span class="status-dot"></span>
                <span class="status-text">HazÄ±r</span>
            </span>
            <span class="task-id" id="taskIdDisplay"></span>
        </div>
    </main>

    <script src="scrum_agents/web/static/dashboard.js"></script>
</body>
</html>
